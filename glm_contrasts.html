<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Book Description">
<title>14&nbsp; GLM: Contrasts – Statistics 1 and 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./factorial.html" rel="next">
<link href="./logistic.html" rel="prev">
<link href="./images/logos/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-c2894b54f4b00a27b9651b11dcf5df54.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-7530c408590d20eba92ebedbb433c75c.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-c2894b54f4b00a27b9651b11dcf5df54.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e5f62320892960dc23dd0786c8482584.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-11ad583e60b2cd5ac7d46970bf1aa65a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-e5f62320892960dc23dd0786c8482584.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
<link rel="stylesheet" href="include/booktem.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/glossary.css">
<link rel="stylesheet" href="include/style.css">
<link rel="stylesheet" href="include/webex.css">
</head>
<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./glm_contrasts.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">GLM: Contrasts</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistics 1 and 2</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/cjvanlissa/stats12" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Statistics-1-and-2.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Statistics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter2_descriptive_statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Probability Distributions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./samplingdistribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Sampling Distribution</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Hypothesis Testing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm1_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">GLM-I: Linear Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm2_sum_squares.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">GLM-II: Sums of Squares</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm3binary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">GLM-III: Binary Predictors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm4anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">GLM-IV: ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm5multiple.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">GLM-V: Multiple regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm6nested.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">GLM-VI: Nested models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm7interaction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">GLM-VII: Interaction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">GLM VIII - Logistic Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glm_contrasts.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">GLM: Contrasts</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./factorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">GLM: Factorial ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ancova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">GLM: ANCOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rmanova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">GLM: Repeated Measures ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reliability_validity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Reliability and Validity</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_reduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Dimension Reduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confint.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">BE2 - Confidence Intervals</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data for Portfolio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Z-table</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./formula_sheet2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Formula sheet</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#effects-coding" id="toc-effects-coding" class="nav-link active" data-scroll-target="#effects-coding"><span class="header-section-number">14.1</span> Effects Coding</a></li>
  <li><a href="#contrast-coding" id="toc-contrast-coding" class="nav-link" data-scroll-target="#contrast-coding"><span class="header-section-number">14.2</span> Contrast Coding</a></li>
  <li><a href="#post-hoc-tests" id="toc-post-hoc-tests" class="nav-link" data-scroll-target="#post-hoc-tests"><span class="header-section-number">14.3</span> ‘Post-Hoc’ Tests</a></li>
  <li><a href="#adjusting-for-multiple-comparisons" id="toc-adjusting-for-multiple-comparisons" class="nav-link" data-scroll-target="#adjusting-for-multiple-comparisons"><span class="header-section-number">14.4</span> Adjusting for Multiple Comparisons</a></li>
  <li><a href="#lecture" id="toc-lecture" class="nav-link" data-scroll-target="#lecture"><span class="header-section-number">15</span> Lecture</a></li>
  <li>
<a href="#tutorial" id="toc-tutorial" class="nav-link" data-scroll-target="#tutorial"><span class="header-section-number">16</span> Tutorial</a>
  <ul class="collapse">
<li><a href="#group-means" id="toc-group-means" class="nav-link" data-scroll-target="#group-means"><span class="header-section-number">16.1</span> Group Means</a></li>
  <li><a href="#more-dummies" id="toc-more-dummies" class="nav-link" data-scroll-target="#more-dummies"><span class="header-section-number">16.2</span> More Dummies</a></li>
  <li><a href="#estimating-group-means" id="toc-estimating-group-means" class="nav-link" data-scroll-target="#estimating-group-means"><span class="header-section-number">16.3</span> Estimating group means</a></li>
  <li><a href="#comparing-to-overall-mean" id="toc-comparing-to-overall-mean" class="nav-link" data-scroll-target="#comparing-to-overall-mean"><span class="header-section-number">16.4</span> Comparing to Overall Mean</a></li>
  <li>
<a href="#comparing-groups-of-means" id="toc-comparing-groups-of-means" class="nav-link" data-scroll-target="#comparing-groups-of-means"><span class="header-section-number">16.5</span> Comparing Groups of Means</a>
  <ul class="collapse">
<li><a href="#step-1-plan-contrasts" id="toc-step-1-plan-contrasts" class="nav-link" data-scroll-target="#step-1-plan-contrasts"><span class="header-section-number">16.5.1</span> Step 1: Plan Contrasts</a></li>
  <li><a href="#step-2-account-for-group-size" id="toc-step-2-account-for-group-size" class="nav-link" data-scroll-target="#step-2-account-for-group-size"><span class="header-section-number">16.5.2</span> Step 2: Account for Group Size</a></li>
  <li><a href="#step-3-do-matrix-algebra" id="toc-step-3-do-matrix-algebra" class="nav-link" data-scroll-target="#step-3-do-matrix-algebra"><span class="header-section-number">16.5.3</span> Step 3: Do Matrix Algebra</a></li>
  </ul>
</li>
  <li><a href="#run-the-analysis" id="toc-run-the-analysis" class="nav-link" data-scroll-target="#run-the-analysis"><span class="header-section-number">16.6</span> Run the Analysis</a></li>
  <li>
<a href="#adjusting-for-multiple-comparisons-1" id="toc-adjusting-for-multiple-comparisons-1" class="nav-link" data-scroll-target="#adjusting-for-multiple-comparisons-1"><span class="header-section-number">16.7</span> Adjusting for Multiple Comparisons</a>
  <ul class="collapse">
<li><a href="#bonferroni-correction" id="toc-bonferroni-correction" class="nav-link" data-scroll-target="#bonferroni-correction"><span class="header-section-number">16.7.1</span> Bonferroni correction</a></li>
  </ul>
</li>
  <li><a href="#compare-all-groups" id="toc-compare-all-groups" class="nav-link" data-scroll-target="#compare-all-groups"><span class="header-section-number">16.8</span> Compare All Groups</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-glmcontrasts" class="quarto-section-identifier"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">GLM: Contrasts</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>Recall that in one-way ANOVA, we have a categorical predictor and a continuous outcome variable. The overall F-test of an ANOVA provides an omnibus (overall) test of differences between group means. The null hypothesis tested in this case is that all <span class="math inline">\(k\)</span> groups have the same mean, <span class="math inline">\(H_0: \mu_1 = \mu_2 = \ldots \mu_k\)</span>. Today, we delve deeper into tests you can perform when you have more complex hypotheses about group means, or want to perform follow-up tests to determine which groups differ significantly.</p>
<p>First, we already covered that we can use dummy variables to incorporate this categorical predictor in a regression model. We pick one reference category and create dummy variables to indicate membership in the other groups. These dummy variables take binary values (0 or 1) to represent group membership.</p>
<p>The formula for regression with dummies is:</p>
<p><span class="math inline">\(\hat{Y}_i = a + b_1D_{1i}+ b_2D_{2i}+ b_3D_{3i}+ b_4D_{4i}\)</span></p>
<p>The intercept represents the mean value of the reference category, and the coefficients <span class="math inline">\(b\)</span> represent the differences between each group and that reference category.</p>
<p>A different way to specify the same model is to omit the intercept, and include a dummy for each of the <span class="math inline">\(k\)</span> groups, so we represent <span class="math inline">\(k\)</span> groups with <span class="math inline">\(k\)</span> dummies:</p>
<p><span class="math inline">\(\hat{Y}_i = b_1D_{1i}+ b_2D_{2i}+ b_3D_{3i}+ b_4D_{4i}+ b_5D_{5i}\)</span></p>
<p>Both of these models are mathematically identical. The advantage of estimating all group means is that this model provides a standard error for each group mean, allowing us to test each group mean against hypothesized values.</p>
<section id="effects-coding" class="level2" data-number="14.1"><h2 data-number="14.1" class="anchored" data-anchor-id="effects-coding">
<span class="header-section-number">14.1</span> Effects Coding</h2>
<p>Another way to include a categorical predictor is via effects coding. Effects coding compares each group to the grand mean. When we have unequal group sizes, the coding scheme should account for relative group size.</p>
</section><section id="contrast-coding" class="level2" data-number="14.2"><h2 data-number="14.2" class="anchored" data-anchor-id="contrast-coding">
<span class="header-section-number">14.2</span> Contrast Coding</h2>
<p>Contrast coding is yet another coding scheme; it compares groups of means. This allows us to test specific hypotheses about differences between groups. Contrast coding is a very advanced technique that requires you to perform some basic matrix algebra in Excel.</p>
</section><section id="post-hoc-tests" class="level2" data-number="14.3"><h2 data-number="14.3" class="anchored" data-anchor-id="post-hoc-tests">
<span class="header-section-number">14.3</span> ‘Post-Hoc’ Tests</h2>
<p>The notion of post-hoc tests is a bit outdated; it essentially refers to making all possible comparisons between group means. The name is based on the fact that such tests are rarely hypothesized beforehand. They can be considered an exploratory procedure to look for differences between groups. Note that performing many tests inflates the risk of drawing false-positive conclusions (Type I error).</p>
</section><section id="adjusting-for-multiple-comparisons" class="level2" data-number="14.4"><h2 data-number="14.4" class="anchored" data-anchor-id="adjusting-for-multiple-comparisons">
<span class="header-section-number">14.4</span> Adjusting for Multiple Comparisons</h2>
<p>When conducting multiple tests, we face an increased risk of committing Type I errors (false positives). If we perform <span class="math inline">\(m\)</span> tests within one study, the experiment-wise Type I error rate is <span class="math inline">\(1- (1-\alpha)^m\)</span>. To control the experiment-wise Type I error rate, we can apply a Bonferroni correction, which divides the significance level <span class="math inline">\(\alpha\)</span> by the number of tests <span class="math inline">\(m\)</span>. This trades off fewer false positive results for more false negative results.</p>
<p>Planning to test specific hypotheses before conducting the study also helps control Type I error.</p>
</section><section id="lecture" class="level1" data-number="15"><h1 data-number="15">
<span class="header-section-number">15</span> Lecture</h1>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/8UDpTwXoINU" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section><section id="tutorial" class="level1" data-number="16"><h1 data-number="16">
<span class="header-section-number">16</span> Tutorial</h1>
<section id="group-means" class="level2" data-number="16.1"><h2 data-number="16.1" class="anchored" data-anchor-id="group-means">
<span class="header-section-number">16.1</span> Group Means</h2>
<p>In this tutorial, you will learn to use the general linear model to estimate means and to test the difference between two group means, the difference between individual group means and the overall mean, and between groups of means.</p>
<p>Open hiking_long.sav in SPSS.</p>
<p>The data file describes the result of a fictitious experiment. A hiking guide has displayed five different types of behavior towards different groups of hikers. The treatment that each person received from the guide is recorded in the variable <code>behavior</code>.</p>
<p>The dependent variable of this experiment is <code>feeling</code>. Higher scores on this variable indicate a more positive attitude of a participant towards the guide. In this assignment, we will use ANOVA to determine whether the mean score on the dependent variable differs between the five experimental conditions.</p>
<p>The data file contains a third variable named <code>weather</code> which can be either good or bad. For now, we will only look at the results obtained during good weather. Hence, we will use “Select cases” to select only those participants with a value of 1 on the weather variable.</p>
<p>Additionally, the data contains a variable named <code>balanced</code> which distinguishes between data resulting from a balanced experiment (with equal sample sizes in all groups), and from an unbalanced experiment (with unequal group sizes). For now, just ignore this variable.</p>
<p>Click Data &gt; Select Cases and select “If condition is satisfied” and click the “If”-button. Now enter the following condition into the equation box:</p>
<p><code>weather = 1</code></p>
<p>Now click “Continue” and “Paste” to paste the resulting syntax into the syntax editor. Select Run &gt; All to run it. You should now see in the Data View tab that half of the participants have been crossed out.</p>
<p>First, let’s compute the overall mean of feeling and tabulate the group means.</p>
<p>What is the overall mean of feeling? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;5.74&quot;]"></p>
<p>What are the group means:</p>
<ul>
<li>What is the mean of the rushing group? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;5.47&quot;]">
</li>
<li>What is the mean of the stories group? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;6.12&quot;]">
</li>
<li>What is the mean of the insulting group? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;4.62&quot;]">
</li>
</ul>
<div class="webex-solution">
<button>
Answer
</button>
<p>To get the mean of feeling, use Analyze -&gt; Descriptive Statistics -&gt; Descriptives.</p>
<p>To get the group means, use Analyze -&gt; Compare Means -&gt; Means</p>
<pre><code>DESCRIPTIVES VARIABLES=feeling 
  /STATISTICS=MEAN STDDEV MIN MAX.
  
MEANS TABLES=feeling BY behavior
  /CELLS=MEAN COUNT STDDEV.</code></pre>
</div>
<p>You have previously learned to include categorical variables in a linear model by using dummy coding. Today, we will build upon this principle of encoding the information from a categorical variable into several numerical variables.</p>
<p>First, recall that a linear model with a five-group nominal predictor can be written as follows:</p>
<p><span class="math inline">\(\hat{Y} = b_0 + b_1*D_1 + b_2*D_2 + b_3*D_3 + b_4*D_4\)</span></p>
<p>What is <span class="math inline">\(b_0\)</span> in this equation?</p>
<div id="radio_HTEOTQDOOJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HTEOTQDOOJ" value="answer"><span>The intercept; it is the mean of the reference category.</span></label><label><input type="radio" autocomplete="off" name="radio_HTEOTQDOOJ" value=""><span>The average of the group means</span></label><label><input type="radio" autocomplete="off" name="radio_HTEOTQDOOJ" value=""><span>The overall sample mean.</span></label><label><input type="radio" autocomplete="off" name="radio_HTEOTQDOOJ" value=""><span>The slope of the reference category.</span></label>
</div>
<p>To estimate the model above using regression, you could code dummy variables as follows:</p>
<table class="caption-top table">
<thead><tr class="header">
<th>behavior</th>
<th>D1</th>
<th>D2</th>
<th>D3</th>
<th>D4</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rushing</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>telling stories</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>insulting</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>making jokes</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td>singing</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>What is the reference category in the coding scheme above? <select class="webex-select"><option value="blank"></option>
<option value="answer">singing</option>
<option value="">rushing</option>
<option value="">none</option>
<option value="">jokes</option></select></p>
<p>Specify the dummies as described in the table, and estimate the model.</p>
<div class="webex-solution">
<button>
Answer
</button>
<p>To get the mean of feeling, use Analyze -&gt; Descriptive Statistics -&gt; Descriptives.</p>
<p>To get the group means, use Analyze -&gt; Compare Means -&gt; Means</p>
<pre><code>RECODE behavior (1=1) (2=0) (3=0) (4=0) (5=0) INTO rushing.
RECODE behavior (1=0) (2=1) (3=0) (4=0) (5=0) INTO stories.
RECODE behavior (1=0) (2=0) (3=1) (4=0) (5=0) INTO insulting.
RECODE behavior (1=0) (2=0) (3=0) (4=1) (5=0) INTO jokes.
EXECUTE.

  
REGRESSION
  /MISSING LISTWISE
  /STATISTICS COEFF OUTS R ANOVA
  /CRITERIA=PIN(.05) POUT(.10)
  /NOORIGIN 
  /DEPENDENT feeling
  /METHOD=ENTER rushing stories insulting jokes.</code></pre>
</div>
<p>What’s the value of the intercept? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;6.35&quot;]"></p>
<p>In this analysis, the intercept is the mean value on feeling for the reference category (singing). Verify that this is true by comparing the intercept of this regression to the Means table you made previously.</p>
<p>What is the value of the coefficient for <code>stories</code>? <input class="webex-solveme nospaces" data-tol="0.01" size="5" data-answer="[&quot;-0.23&quot;,&quot;-.23&quot;]"></p>
<p>How can we interpret this coefficient?</p>
<div id="radio_KKHMPUZXVK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_KKHMPUZXVK" value="answer"><span>The difference between the mean of the singing group and the mean of the stories group.</span></label><label><input type="radio" autocomplete="off" name="radio_KKHMPUZXVK" value=""><span>The mean of the stories group.</span></label>
</div>
</section><section id="more-dummies" class="level2" data-number="16.2"><h2 data-number="16.2" class="anchored" data-anchor-id="more-dummies">
<span class="header-section-number">16.2</span> More Dummies</h2>
<p>As we’ve previously established, dummy variables allow us to test the significance of mean differences between one reference group and all other groups.</p>
<p>Now, imagine we expect rushing to have a negative effect on behavior, and we want to know which other behaviors are “better” (i.e., result in a higher score on behavior) than rushing.</p>
<p>Specify your hypotheses, then check your answer.</p>
<div class="webex-solution">
<button>
Answer
</button>
<p><span class="math inline">\(H_0: \mu_{rushing} \leq (\mu_{stories}, \mu_{insulting}, \mu_{joking}, \mu_{singing})\)</span></p>
<p><span class="math inline">\(H_1: \mu_{rushing} &lt; (\mu_{stories}, \mu_{insulting}, \mu_{joking}, \mu_{singing})\)</span></p>
</div>
<p>Use dummy variables to test this hypothesis. Note: you will need to specify one additional dummy.</p>
<div class="webex-solution">
<button>
Answer
</button>
<pre><code>REGRESSION
  /MISSING LISTWISE
  /STATISTICS COEFF OUTS R ANOVA
  /CRITERIA=PIN(.05) POUT(.10)
  /NOORIGIN 
  /DEPENDENT feeling
  /METHOD=ENTER stories insulting jokes singing.</code></pre>
</div>
<p>What is the <span class="math inline">\(R^2\)</span> of this model? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;0.37&quot;,&quot;.37&quot;]"></p>
<p>Compare this to the <span class="math inline">\(R^2\)</span> of your previous model. They should be identical, as should be the overall F-test and p-values. Changing the reference category doesn’t change what information the dummies convey.</p>
<p>Do we perform one-sided or two sided tests? <select class="webex-select"><option value="blank"></option>
<option value="answer">one-sided</option>
<option value="">two-sided</option></select></p>
<p>Use this information to test your hypotheses.</p>
<p>Which behaviors are “better” than rushing?</p>
<div id="radio_MVQKBACRQQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MVQKBACRQQ" value=""><span>jokes and singing</span></label><label><input type="radio" autocomplete="off" name="radio_MVQKBACRQQ" value=""><span>no behaviors</span></label><label><input type="radio" autocomplete="off" name="radio_MVQKBACRQQ" value=""><span>all behaviors</span></label><label><input type="radio" autocomplete="off" name="radio_MVQKBACRQQ" value="answer"><span>stories, jokes, and insulting</span></label>
</div>
<p>You can use this technique any time you want to test the significance of the difference between one reference group and other groups.</p>
<p>Note that, in the first assignment, we used a different set of dummy variables than in the second assignment. This means that you can always use different sets of dummy variables when want to compare against multiple reference groups.</p>
</section><section id="estimating-group-means" class="level2" data-number="16.3"><h2 data-number="16.3" class="anchored" data-anchor-id="estimating-group-means">
<span class="header-section-number">16.3</span> Estimating group means</h2>
<p>In the first assignment, we computed the group means. But remember that the ANOVA model allows us to estimate them using the general linear model. In this assignment, we will do so by hand. After the previous assignment, you should have five dummy variables to represent the five groups of <code>behavior</code>.</p>
<p>Until now, you’ve always included four dummy variables to represent five categories, as the last category is represented by the intercept.</p>
<p>However, it is also possible to represent five groups as follows:</p>
<p><span class="math inline">\(\hat{Y} = b_1*D_1 + b_2*D_2 + b_3*D_3 + b_4*D_4 + b_5*D_5\)</span></p>
<p>What is <span class="math inline">\(b_5\)</span> in this equation?</p>
<div id="radio_BSLIQFEZAD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BSLIQFEZAD" value=""><span>The mean value of group 5</span></label><label><input type="radio" autocomplete="off" name="radio_BSLIQFEZAD" value="answer"><span>The intercept; it is the mean of the reference category.</span></label><label><input type="radio" autocomplete="off" name="radio_BSLIQFEZAD" value=""><span>The slope of the reference category.</span></label><label><input type="radio" autocomplete="off" name="radio_BSLIQFEZAD" value=""><span>The overall sample mean.</span></label>
</div>
<p>To estimate the model above using regression, you could code dummy variables as follows (note that you should already have all these dummies from the previous assignment):</p>
<table class="caption-top table">
<thead><tr class="header">
<th>behavior</th>
<th>D1</th>
<th>D2</th>
<th>D3</th>
<th>D4</th>
<th>D5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rushing</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>telling stories</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>insulting</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>making jokes</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="odd">
<td>singing</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Now, go to Analyze -&gt; Regression -&gt; Linear, and add <strong>all five</strong> dummies as predictors.</p>
<p>Then, click the Options button, and notice the option titled “Include Constant in Equation”.</p>
<p>Turn this option off to remove the intercept from the regression equation, then paste your syntax. Notice a new line that says <code>/ORIGIN</code> instead of <code>/NOORIGIN</code>. This command removes the intercept.</p>
<p>Run your syntax, and examine the results.</p>
<p>You might notice that the <span class="math inline">\(R^2\)</span> and F-test changed. This is because these are computed relative to a null-model with only the intercept - but you told SPSS not to include an intercept, so it can’t compute that null model here. It’s not a big deal. As soon as you estimate models with an intercept again, the <span class="math inline">\(R^2\)</span>s will be identical again, regardless of the dummy coding.</p>
<p>What’s the value of the dummy for singing? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;6.35&quot;]"></p>
<p>Compare all coefficients to the table of means from the first assignment. They should all be identical.</p>
<p>This is how you estimate means using the linear model!</p>
<p>Now, what do the t-tests and p-values in the Coefficients table tell us?</p>
<div id="radio_AJSPEDIIAI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_AJSPEDIIAI" value=""><span>Whether the means are significantly different from the reference category.</span></label><label><input type="radio" autocomplete="off" name="radio_AJSPEDIIAI" value=""><span>Whether the means are significantly different from each other.</span></label><label><input type="radio" autocomplete="off" name="radio_AJSPEDIIAI" value="answer"><span>Whether the means are significantly different from zero.</span></label><label><input type="radio" autocomplete="off" name="radio_AJSPEDIIAI" value=""><span>They are not meaningful.</span></label>
</div>
<p>Keep in mind that you can use the standard errors from the coefficients table to perform t-tests against other values than 0; for example, what would the test statistic be when testing whether the mean of the insulting group is significantly different from 5, so <span class="math inline">\(H_0: \mu_{insulting} = 5\)</span>? t = <input class="webex-solveme nospaces" data-tol="0.01" size="5" data-answer="[&quot;-1.52&quot;]"></p>
<p>Is the difference significant? <select class="webex-select"><option value="blank"></option>
<option value="">Yes</option>
<option value="answer">No</option></select></p>
<p>You can use regression without an intercept any time you wish to estimate <em>all</em> group means in a single analysis and/or test the group means against specific hypothesized values.</p>
</section><section id="comparing-to-overall-mean" class="level2" data-number="16.4"><h2 data-number="16.4" class="anchored" data-anchor-id="comparing-to-overall-mean">
<span class="header-section-number">16.4</span> Comparing to Overall Mean</h2>
<p>Until now, we’ve represented levels of a categorical variable using <em>dummy variables</em> with values 0 or 1.</p>
<p>In this assignment, we introduce an alternative coding system: <em>effects coding</em>.</p>
<p>The main difference with dummy coding is that the reference category does not receive 0 values on all indicator variables, but instead, receives a negative value. In a balanced design (with equal sizes for each group), this value is -1.</p>
<p>So in a balanced design, with equal group sizes, the coding scheme for effects coding is (I now use the letters E1-E4 to clarify that these are not dummies but effect coded indicators):</p>
<table class="caption-top table">
<thead><tr class="header">
<th>behavior</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rushing</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>telling stories</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>insulting</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>making jokes</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td>singing</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
<td>-1</td>
</tr>
</tbody>
</table>
<p>The reference category is still “singing”.</p>
<p>The resulting model will give us the following information:</p>
<ul>
<li>The overall sample mean for feeling</li>
<li>The difference between each group mean, except for singing, compared to the overall mean</li>
</ul>
<p>Most of the time, however, we will <strong>not</strong> have balanced designs. With this in mind, it is more useful to learn the general way to construct effect coding.</p>
<p>Specifically, the weights assigned for the singing category (reference category) differ for each dummy, and are computed as:</p>
<p><span class="math inline">\(-1 * n_{\text{this category}} / n_{\text{reference category}}\)</span></p>
<p>Check the group sizes in the output from assignment 1.</p>
<p>What is the sample size for the rushing group? <input class="webex-solveme nospaces" size="2" data-answer="[&quot;13&quot;]"></p>
<p>What is the sample size for the reference category? <input class="webex-solveme nospaces" size="2" data-answer="[&quot;11&quot;]"></p>
<p>With this in mind, what should the weight be for the singing group, on the dummy that codes for membership of the rushing group? <input class="webex-solveme nospaces" data-tol="0.01" size="5" data-answer="[&quot;-1.18&quot;]"></p>
<p>Complete the following syntax, then run it:</p>
<p>RECODE behavior (1=1) (2=0) (3=0) (4=0) (5= …) INTO Erushing. RECODE behavior (1=0) (2=1) (3=0) (4=0) (5=<input class="webex-solveme nospaces" size="2" data-answer="[&quot;-1&quot;]">) INTO Estories. RECODE behavior (1=0) (2=0) (3=1) (4=0) (5=<input class="webex-solveme nospaces" data-tol="0.005" size="5" data-answer="[&quot;-1.18&quot;]">) INTO Einsulting. RECODE behavior (1=0) (2=0) (3=0) (4=1) (5=…) INTO Ejokes. EXECUTE.</p>
<p>Note the correct answer for the effect code for the stories group. Compare the number of people in the stories group and in the reference group. Then recall that I explained that <em>In a balanced design (with equal sizes for each group), this value is -1.</em> You see that this is true now, and why.</p>
<p>Calculate the effect indicators, then specify a regression model with these four effect indicators. Make sure to include the intercept again!</p>
<div class="webex-solution">
<button>
Check correct syntax
</button>
<pre><code>
RECODE behavior (1=1) (2=0) (3=0) (4=0) (5= -1.18) INTO Erushing.
RECODE behavior (1=0) (2=1) (3=0) (4=0) (5=-1) INTO Estories.
RECODE behavior (1=0) (2=0) (3=1) (4=0) (5=-1.18) INTO Einsulting.
RECODE behavior (1=0) (2=0) (3=0) (4=1) (5=-1.18) INTO Ejokes.
EXECUTE.


REGRESSION
  /MISSING LISTWISE
  /STATISTICS COEFF OUTS R ANOVA
  /CRITERIA=PIN(.05) POUT(.10)
  /NOORIGIN 
  /DEPENDENT feeling
  /METHOD=ENTER Erushing Estories Einsulting Ejokes.
</code></pre>
</div>
<p>Run the syntax. What is the F-value of the model? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;8.34&quot;]"></p>
<p>Verify that this is the same value you got before in models with an intercept.</p>
<p>What is the value of the intercept? <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;5.74&quot;]"></p>
<p>Verify that this is identical to the overall mean of the dependent variable.</p>
<p>Which group means differ significantly from the overall mean?</p>
<div id="radio_NASRSVGSIQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NASRSVGSIQ" value=""><span>no behaviors</span></label><label><input type="radio" autocomplete="off" name="radio_NASRSVGSIQ" value=""><span>insulting</span></label><label><input type="radio" autocomplete="off" name="radio_NASRSVGSIQ" value=""><span>all behaviors</span></label><label><input type="radio" autocomplete="off" name="radio_NASRSVGSIQ" value="answer"><span>jokes and insulting</span></label>
</div>
<p>Using the coefficients table, calculate the mean of the jokes group. What value do you get? <input class="webex-solveme nospaces" data-tol="0.01" size="3" data-answer="[&quot;6.3&quot;]"></p>
<p>This should be identical to the mean you observed in the previous assignment (using regression to estimate means), and in the first assignment (just computing the means).</p>
</section><section id="comparing-groups-of-means" class="level2" data-number="16.5"><h2 data-number="16.5" class="anchored" data-anchor-id="comparing-groups-of-means">
<span class="header-section-number">16.5</span> Comparing Groups of Means</h2>
<p>Extending the methods above, it is also possible to compare <em>groups</em> of means. For example, we might wonder whether negative behaviors (rushing and insulting) differ significantly from positive behaviors (stories, jokes, and singing).</p>
<p>This approach builds upon the logic of effects coding, where the weights for the reference category were based on the relative sample size of the reference category. This time, however, the weights for the category to be compared to the reference category are <em>also</em> based on a sample size.</p>
<p>We are going to perform several steps, as explained in the lecture.</p>
<section id="step-1-plan-contrasts" class="level3" data-number="16.5.1"><h3 data-number="16.5.1" class="anchored" data-anchor-id="step-1-plan-contrasts">
<span class="header-section-number">16.5.1</span> Step 1: Plan Contrasts</h3>
<p>Keep in mind these rules:</p>
<ol type="1">
<li>The possible values of each indicator variable must sum to 0.</li>
<li>Each group must be uniquely identified by a particular combination of the contrast variables.</li>
</ol>
<p>Assume for a moment that we have equal group sizes and want to compare groups 1 and 2 to groups 3, 4, and 5.</p>
<p>Appropriate contrasts would then be (I’m using the letter C to indicate that these are not dummies or effect indicators):</p>
<table class="caption-top table">
<thead><tr class="header">
<th>behavior</th>
<th>C1</th>
<th>C2</th>
<th>C3</th>
<th>C4</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rushing</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>insulting</td>
<td>1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>telling stories</td>
<td>-<span class="math inline">\(\frac{2}{3}\)</span>
</td>
<td>0</td>
<td>2</td>
<td>0</td>
</tr>
<tr class="even">
<td>making jokes</td>
<td>-<span class="math inline">\(\frac{2}{3}\)</span>
</td>
<td>0</td>
<td>-1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>singing</td>
<td>-<span class="math inline">\(\frac{2}{3}\)</span>
</td>
<td>0</td>
<td>-1</td>
<td>-1</td>
</tr>
</tbody>
</table>
<p>Note that:</p>
<ul>
<li>Each column sums to 0</li>
<li>Every level of behavior is uniquely identified by some combination of contrasts</li>
</ul>
<p>In this case, we only care about C1; we created C2, C3 and C4 to ensure that every level of behavior is uniquely identified. But what do C2-C4 test?</p>
<p>C2 compares the two negative behaviors; C3 compares stories against jokes and singing. C4 compares jokes and singing.</p>
</section><section id="step-2-account-for-group-size" class="level3" data-number="16.5.2"><h3 data-number="16.5.2" class="anchored" data-anchor-id="step-2-account-for-group-size">
<span class="header-section-number">16.5.2</span> Step 2: Account for Group Size</h3>
<p>Now, we have to account for the relative sample sizes of these groups to ensure that we can interpret the coefficients as the difference between the means of those combinations of groups.</p>
<p>Use the descriptive statistics you previously obtained to weight the contrasts from step 1.</p>
<p>E.g., contrast C3 below is already completed. Which other contrasts do you still need to change? <select class="webex-select"><option value="blank"></option>
<option value="answer">C1</option>
<option value="">C1, C2, C4</option>
<option value="">none</option>
<option value="">C2 and C4</option></select></p>
<table class="caption-top table">
<thead><tr class="header">
<th>behavior</th>
<th>C1</th>
<th>C2</th>
<th>C3</th>
<th>C4</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>rushing</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>insulting</td>
<td>1</td>
<td>-1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>telling stories</td>
<td>-<span class="math inline">\(\frac{2}{3}\)</span>
</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td>making jokes</td>
<td>-<span class="math inline">\(\frac{2}{3}\)</span>
</td>
<td>0</td>
<td>-13/(11+13)</td>
<td>1</td>
</tr>
<tr class="odd">
<td>singing</td>
<td>-<span class="math inline">\(\frac{2}{3}\)</span>
</td>
<td>0</td>
<td>-11/(11+13)</td>
<td>-1</td>
</tr>
</tbody>
</table></section><section id="step-3-do-matrix-algebra" class="level3" data-number="16.5.3"><h3 data-number="16.5.3" class="anchored" data-anchor-id="step-3-do-matrix-algebra">
<span class="header-section-number">16.5.3</span> Step 3: Do Matrix Algebra</h3>
<p>Enter the complete matrix into a spreadsheet program. Add one column before the contrasts with an intercept for each group, equal to <span class="math inline">\(1/k\)</span>.</p>
<p>What’s the value of this intercept for this study? <input class="webex-solveme nospaces" size="3" data-answer="[&quot;0.2&quot;,&quot;.2&quot;]"></p>
<ul>
<li>Click an Empty cell</li>
<li>Paste <code>=MINVERSE(TRANSPOSE(</code>
</li>
<li>Select your contrast matrix</li>
<li>Finish the formula by typing closing brackets <code>))</code>
</li>
</ul>
<p><strong>These are the values you will use for your indicators!</strong></p>
<p>Now, write syntax to create the contrasts using the values you calculated in a spreadsheet. Give these contrasts informative names to help remind yourself of their interpretation. Here is one example; complete the rest yourself:</p>
<pre><code>RECODE behavior (1=.6) (2=.6) (3=-.4) (4=-.4) (5= -.4) INTO posVneg.</code></pre>
<div class="webex-solution">
<button>
Answer
</button>
<pre><code>RECODE behavior (1=.6) (2=.6) (3=-.4) (4=-.4) (5= -.4) INTO posVneg.
RECODE behavior (1=.5) (2=-.5) (3=0) (4=0) (5= 0) INTO rushVinsult.
RECODE behavior (1=-.01) (2=-.01) (3=.67) (4=-.33) (5= -.33) INTO storyVjokesing.
RECODE behavior (1=.02) (2=.02) (3=.02) (4=.48) (5= -.53) INTO ? .
EXECUTE.</code></pre>
</div>
<p>What does the final contrast encode? <select class="webex-select"><option value="blank"></option>
<option value="">positive versus negative</option>
<option value="">all levels</option>
<option value="answer">joke versus singing</option>
<option value="">story vs singing</option></select></p>
</section></section><section id="run-the-analysis" class="level2" data-number="16.6"><h2 data-number="16.6" class="anchored" data-anchor-id="run-the-analysis">
<span class="header-section-number">16.6</span> Run the Analysis</h2>
<p>Create the indicator variables and run the regression analysis.</p>
<p>What is the mean difference in feeling between rushing and insulting behaviors? <input class="webex-solveme nospaces" data-tol="0.01" size="5" data-answer="[&quot;-0.65&quot;,&quot;-.65&quot;]"></p>
<p>Which effects are significant? <select class="webex-select"><option value="blank"></option>
<option value="">all contrasts</option>
<option value="">positive V negative behaviors</option>
<option value="answer">story V jokes, singing</option>
<option value="">rushing V insulting</option></select></p>
</section><section id="adjusting-for-multiple-comparisons-1" class="level2" data-number="16.7"><h2 data-number="16.7" class="anchored" data-anchor-id="adjusting-for-multiple-comparisons-1">
<span class="header-section-number">16.7</span> Adjusting for Multiple Comparisons</h2>
<p>In these assignments, we have been conducting many tests. You have learned that the significance level <span class="math inline">\(\alpha\)</span> indicates the probability of drawing a false-positive conclusion (Type I error). However, these probabilities add up for multiple tests! So when you perform many tests, you can be in a situation where you have a very high probability of comitting at least one Type I error.</p>
<p>We call the total probability of committing at least one Type I error across multiple tests in the same study the “family-wise” or experiment-wise Type I error. You compute it as:</p>
<p><span class="math inline">\(P(1+ Type I error) = 1 − (1 − \alpha)^{\text{number of tests}}\)</span></p>
<p>So if we perform 3 comparisons, the probability of committing at least one Type I error is: <input class="webex-solveme nospaces" data-tol="0.01" size="4" data-answer="[&quot;0.14&quot;,&quot;.14&quot;]"></p>
<p>And if we perform 10 tests? <input class="webex-solveme nospaces" data-tol="0.01" size="3" data-answer="[&quot;0.4&quot;,&quot;.4&quot;]"></p>
<p>If this makes you uncomfortable - you’re not alone! People often seek to maintain a low risk of drawing any false-positive conclusions, and we can do so simply by lowering <span class="math inline">\(\alpha\)</span>.</p>
<section id="bonferroni-correction" class="level3" data-number="16.7.1"><h3 data-number="16.7.1" class="anchored" data-anchor-id="bonferroni-correction">
<span class="header-section-number">16.7.1</span> Bonferroni correction</h3>
<p>Bonferroni proposed a simple correction of <span class="math inline">\(\alpha = \alpha_{EW}/m\)</span>, where <span class="math inline">\(\alpha_{EW}\)</span> is the desired experiment-wise Type I error rate (e.g., .05), and <span class="math inline">\(m\)</span> is the number of tests.</p>
<p>What alpha level would you use per test if you want to achieve an experiment-wise alpha of .05 and conduct 7 tests? <input class="webex-solveme nospaces" data-tol="0.001" size="11" data-answer="[&quot;0.007142857&quot;,&quot;.007142857&quot;]"></p>
<p>The Bonferroni correction is quite conservative; in other words - although Bonferroni helps you avoid false-positive conclusions, it becomes much harder to detect true effects.</p>
</section></section><section id="compare-all-groups" class="level2" data-number="16.8"><h2 data-number="16.8" class="anchored" data-anchor-id="compare-all-groups">
<span class="header-section-number">16.8</span> Compare All Groups</h2>
<p>Through the ANOVA interface, you can compare all groups to one another. This is equivalent to repeating a regression analysis multiple times, making each category the reference category in turn.</p>
<p>Go to Analyze -&gt; Compare Means -&gt; One Way ANOVA. Enter Feeling as dependent variable and behavior as Factor.</p>
<p>Now, click post-hoc. Note that you can select many different tests. Select LSD; this corresponds to “normal” p-values.</p>
<p>The other tests in this menu will either apply a penalty to the p-value, or compute the test statistic in a different way, with the purpose of adjusting for multiple comparisons.</p>
<p>We will manually apply the correction for multiple comparisons instead, because the fact that SPSS performs the correction behind the scenes has a high risk of user error.</p>
<p>Assuming we perform two-sided tests at <span class="math inline">\(\alpha = .05\)</span>, how many significant differences between group means are there? <input class="webex-solveme nospaces" size="1" data-answer="[&quot;6&quot;]"></p>
<p>Now, apply a Bonferroni correction to the alpha level. How many tests are you performing? <input class="webex-solveme nospaces" size="2" data-answer="[&quot;10&quot;]"></p>
<p>What is the new alpha level? <input class="webex-solveme nospaces" size="5" data-answer="[&quot;0.005&quot;,&quot;.005&quot;]"></p>
<p>How many comparisons are still significant when using this new alpha level? <input class="webex-solveme nospaces" size="1" data-answer="[&quot;3&quot;]"></p>
<!-- Tukey's HSD: https://stats.stackexchange.com/questions/610993/the-theory-behind-tukeys-hsd-test -->
<!-- Tukey's HSD: https://real-statistics.com/one-way-analysis-of-variance-anova/unplanned-comparisons/tukey-hsd/ -->


</section></section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./logistic.html" class="pagination-link" aria-label="GLM VIII - Logistic Regression">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">GLM VIII - Logistic Regression</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./factorial.html" class="pagination-link" aria-label="GLM: Factorial ANOVA">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">GLM: Factorial ANOVA</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>CC-BY (2023) Caspar J. Van Lissa</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>